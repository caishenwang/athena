function AutoCompleteCtrl(e){function t(){o.isPopup=!0}function a(){o.isPopup=o.popupOnFocus}function n(){o.isPopup=!1}function l(e){o.keywords=e[o.key]}var o=this;o.isPopup=!1,o.showPopup=a,o.hidePopup=n,o.change=t,o.selectItem=l,o.$onInit=function(){}}function DatePickerCtrl(e,t){function a(){"range"===D.defaultDate.dateStatus?i(5,new Date(D.defaultDate.startDate),new Date(D.defaultDate.endDate)):"date"===D.defaultDate.dateStatus&&c(new Date(D.defaultDate.startDate))}function n(e){var t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),l=new Date(t,a,0);l=l.getDate();var o=t,r=parseInt(a)-1;0===r&&(o=parseInt(o)-1,r=12);var u=n,c=new Date(o,r,0);c=c.getDate(),u>c&&(u=c),r<10&&(r="0"+r);var i=o+"-"+r+"-"+u;return i}function l(e){var t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),l=new Date(t,a,0);l=l.getDate();var o=t,r=parseInt(a)+1;13===r&&(o=parseInt(o)+1,r=1);var u=n,c=new Date(o,r,0);c=c.getDate(),u>c&&(u=c),r<10&&(r="0"+r);var i=o+"-"+r+"-"+u;return i}function o(){switch(m){case t.TYPE_TODAY:case t.TYPE_DATE:d=864e5;var e=new Date(new Date(D.dateRange.startDate).getTime()-d);c(e);break;case t.TYPE_7_DAYS_AGO:d=6048e5;var a=new Date(new Date(D.dateRange.endDate).getTime()-d);u(7,a);break;case t.TYPE_30_DAYS_AGO:d=2592e6,a=new Date(new Date(D.dateRange.endDate).getTime()-d),u(30,a);break;case t.TYPE_DATE_RANGE:var l=Math.floor((D.dateRange.endDate-D.dateRange.startDate)/864e5);u(l,D.dateRange.startDate);break;case t.TYPE_LAST_MONTH:var o=new Date(n(D.dateRange.endDate));days=new Date(o.getFullYear(),o.getMonth()+1,0).getDate()-1,e=new Date(o.getFullYear(),o.getMonth(),days+1),u(days,e)}s()}function r(){switch(m){case t.TYPE_TODAY:case t.TYPE_DATE:d=864e5;var e=new Date(new Date(D.dateRange.startDate).getTime()+d);c(e);break;case t.TYPE_7_DAYS_AGO:d=6048e5;var a=new Date(new Date(D.dateRange.endDate).getTime()+d);u(7,a);break;case t.TYPE_30_DAYS_AGO:d=2592e6,a=new Date(new Date(D.dateRange.endDate).getTime()+d),u(30,a);break;case t.TYPE_DATE_RANGE:var n=Math.floor((D.dateRange.endDate-D.dateRange.startDate)/864e5);a=new Date(new Date(D.dateRange.endDate).getTime()+864e5*n),u(n,a);break;case t.TYPE_LAST_MONTH:var o=new Date(l(D.dateRange.endDate)),r=new Date(o.getFullYear(),o.getMonth()+1,0).getDate()-1;e=new Date(o.getFullYear(),o.getMonth(),r+1),u(r,e)}s()}function u(e,t){d=864e5*e,t&&(D.dateRange.endDate=t),D.dateRange.startDate=new Date(D.dateRange.endDate-d)}function c(e){D.dateRange.startDate=e,D.dateRange.endDate=e}function i(e,a,l){switch(m=e){case t.TYPE_TODAY:c(new Date);break;case t.TYPE_7_DAYS_AGO:u(7,D.nowDate);break;case t.TYPE_30_DAYS_AGO:u(30,D.nowDate);break;case t.TYPE_DATE:c(a);break;case t.TYPE_DATE_RANGE:D.dateRange.startDate=a,D.dateRange.endDate=l;var o=Math.floor((D.dateRange.endDate-D.dateRange.startDate)/864e5);u(o,D.dateRange.endDate);break;case t.TYPE_LAST_MONTH:var r=new Date(n(D.dateRange.endDate)),i=new Date(r.getFullYear(),r.getMonth()+1,0).getDate()-1,d=new Date(r.getFullYear(),r.getMonth(),i+1);u(i,d)}s()}function s(){e.$emit("date_update_timely",D.dateRange)}var D=this,d=0,m=t.TYPE_DATE_RANGE;D.nowDate=new Date,D.dateRange={startDate:null,endDate:null},D.prev=o,D.next=r,D.selectDateRange=i,a()}function dateRange(){function e(e){return e=e?new Date(e):new Date,e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}return function(t){return t.startDate==t.endDate?e(t.startDate):e(t.startDate)+" è‡³ "+e(t.endDate)}}function MenuSelector(e,t){function a(t,a,n){n&&a?(o.selectedMenu=[t,a,n],o.isShow=!1):!n&&a?(o.selectedMenu=[t,a],o.isShow=!1):n||a||(o.selectedMenu=[t],o.isShow=!1),e.$emit("get_selected_menu",o.selectedMenu)}function n(){o.isShow=!o.isShow,o.selectedMenu&&(o.menuList1=o.selectedMenu[0],o.menuList2=o.selectedMenu[1],o.menuList3=o.selectedMenu[2])}function l(e,a){var n=a.currentTarget.offsetTop,l=angular.element(".level-1"),o=angular.element(".level-2"),c=angular.element(".level-3");l.find("ul").scroll(function(){r=l.find("ul").scrollTop()}),o.find("ul").scroll(function(){u=o.find("ul").scrollTop()});var i=a.currentTarget.parentNode.className;new RegExp("level-1").test(i)&&t(function(){0!==o.length&&(o[0].style.marginTop=n-r-6+"px")}),new RegExp("level-2").test(i)&&t(function(){0!==c.length&&(c[0].style.marginTop=n-u-6+"px")})}var o=this,r=0,u=0;o.selectedMenu=[],o.isShow=!1,o.selectMenu=a,o.showSelectedMenu=n,o.hoverSelectMenu=l}function menuSelector(){return function(e){if(e){if(e[2])return e[0].name+" > "+e[1].name+" > "+e[2].name;if(e[1])return e[0].name+" > "+e[1].name;if(e[0])return e[0].name}}}function SimpleTable(){function e(e){e.isShow=!e.isShow}var t=this;t.isShow=!1,t.showDetail=e}function AutoCompleteItemCtrl(e){function t(){a.onSelect&&a.onSelect()}var a=this;a.selectResult=t,e.getTemplate=function(){return"auto-complete-"+a.type+".view.html"}}angular.module("athena",["athena.autoComplete","athena.menuSelector","athena.templates","athena.datePicker","athena.simpleTable","ngSanitize"]),angular.module("athena.templates",[]),angular.module("athena.autoComplete",[]).component("autoComplete",{templateUrl:"auto-complete.view.html",controller:"AutoCompleteCtrl",controllerAs:"complete",bindings:{key:"@",type:"@",placeholder:"@",itemList:"<",popupOnFocus:"<",selectedItem:"=",keywords:"="}}),angular.module("athena.autoComplete").controller("AutoCompleteCtrl",AutoCompleteCtrl),AutoCompleteCtrl.$inject=["$scope"],angular.module("athena.datePicker",[]).component("datePicker",{templateUrl:"date-picker.view.html",controller:"DatePickerCtrl",controllerAs:"date",bindings:{defaultDate:"<"}}).constant("DATE_PICKER_TYPE",{TYPE_TODAY:1,TYPE_7_DAYS_AGO:2,TYPE_30_DAYS_AGO:3,TYPE_DATE:4,TYPE_DATE_RANGE:5,TYPE_LAST_MONTH:6}),angular.module("athena.datePicker").controller("DatePickerCtrl",DatePickerCtrl),DatePickerCtrl.$inject=["$scope","DATE_PICKER_TYPE"],angular.module("athena.datePicker").filter("dateRange",dateRange),dateRange.$inject=[],angular.module("athena.menuSelector",[]).component("menuSelector",{templateUrl:"menu-selector.view.html",controller:"MenuSelector",controllerAs:"menu",bindings:{menuList:"<",placeholder:"@",level:"<",selectedMenu:"<"}}),angular.module("athena.menuSelector").controller("MenuSelector",MenuSelector),MenuSelector.$inject=["$scope","$timeout"],angular.module("athena.menuSelector").filter("menuSelector",menuSelector),menuSelector.$inject=[],angular.module("athena.simpleTable",[]).component("simpleTable",{templateUrl:"simple-table.view.html",controller:"SimpleTable",controllerAs:"table",bindings:{tableConfig:"<",tableData:"<"}}),angular.module("athena.simpleTable").controller("SimpleTable",SimpleTable),SimpleTable.$inject=[],angular.module("athena.autoComplete").component("autoCompleteItem",{template:'<div ng-include="getTemplate()"></div>',controller:"AutoCompleteItemCtrl",controllerAs:"complete",bindings:{key:"<",type:"<",item:"<",onSelect:"&"}}),angular.module("athena.autoComplete").controller("AutoCompleteItemCtrl",AutoCompleteItemCtrl),AutoCompleteItemCtrl.$inject=["$scope"];